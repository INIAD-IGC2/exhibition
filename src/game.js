HTMLElement.prototype.hold||Object.defineProperty(HTMLElement.prototype,"hold",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){this.addEventListener("touchstart",function(n){n.preventDefault(),e();let r=0;const o=setInterval(function(){(r+=100)>t&&e()},1);this.addEventListener("touchend",function(e){e.preventDefault(),clearInterval(o)})})}});var input_key_buffer=new Array,button_=new Array,rep="/exhibition";function handleKeydown(e){e.preventDefault(),input_key_buffer[e.keyCode]=!0}function handleKeyup(e){e.preventDefault(),input_key_buffer[e.keyCode]=!1}window.addEventListener("keydown",handleKeydown),window.addEventListener("keyup",handleKeyup);const l=document.querySelector(".left"),r=document.querySelector(".right"),j=document.querySelector(".jump");l.hold(()=>{button_[0]=!0},0),r.hold(()=>{button_[1]=!0},0),j.hold(()=>{button_[2]=!0},0);const canvas=document.getElementById("maincanvas"),ctx=canvas.getContext("2d");var x=500,y=600,left=!0,vy=0,isJump=!1,onhead=!1,isGameOver=!1,btime=0,time2=0,blocks=[{x:0,y:790,w:1920,h:32},{x:0,y:600,w:350,h:32},{x:250,y:400,w:100,h:32},{x:300,y:200,w:730,h:32},{x:1e3,y:600,w:520,h:32}],houses=[{x:800,y:0,w:200,h:200,src:rep+"/images/house-01/base.png",in:!1,link:"https://igc2.jp/exhibition/"},{x:0,y:600,w:200,h:200,src:rep+"/images/house-01/base2.png",in:!1,link:"https://igc2.jp"},{x:1200,y:400,w:200,h:200,src:rep+"/images/house-01/base3.png",in:!1,link:"https://igc2.jp/INIADGAMESHOW2020forPhone/"}];function update(){ctx.clearRect(0,0,1920,960);var e=new Image;e.src=rep+"/images/title/base.png",ctx.drawImage(e,600,300,500,500);var t=x,n=y;if(isGameOver)n=y+vy,vy+=1,y>1e3&&(alert("GAME OVER"),isGameOver=!1,isJump=!1,t=0,n=600,vy=0);else{if(button_[2]&&time2++,input_key_buffer[38]&&btime++,(input_key_buffer[37]|button_[0])&x>10&&(button_[0]=!1,t=x-4,left=!0),((input_key_buffer[38]&&btime<15)|(button_[2]&&time2<15))&onhead&&(vy=-20,isJump=!0),button_[2]=!1,(input_key_buffer[39]|button_[1])&x<1900&&(button_[1]=!1,t=x+4,left=!1),isJump){n=y+vy,vy+=1;const e=getBlockTargrtIsOn(x,y,t,n);null!=e&&(n=e.y-64,isJump=!1)}else null==getBlockTargrtIsOn(x,y,t,n)&&(isJump=!0,vy=0);y>1800&&(isGameOver=!0,n=1e3,vy=-30)}null==getBlockTargrtIsOn(x,y,t,n)&&(onhead=!1),null!=getBlockTargrtIsOn(x,y,t,n)&&(onhead=!0),isJump||(btime=0,time2=0),x=t,y=n;for(const e of houses){var r=new Image;r.src=e.src,ctx.drawImage(r,e.x,e.y,e.w,e.h),y>=e.y&y<=e.y+e.h&x>=e.x&x<=e.x+e.w?(e.in||(newtab(e.link),window.location.href=""),e.in=!0):e.in=!1}var o=new Image;o.src=left?rep+"/images/c-1/base2.png":rep+"/images/c-1/base.png",ctx.drawImage(o,x,y,64,64);var a=new Image;a.src=rep+"/images/ground-01/base.png";for(const e of blocks)ctx.drawImage(a,e.x,e.y,e.w,e.h);window.requestAnimationFrame(update)}function getBlockTargrtIsOn(e,t,n,r){for(const o of blocks)if(t+64<=o.y&&r+64>=o.y){if((e+64<=o.x||e>=o.x+o.w)&&(n+64<=o.x||n>=o.x+o.w))continue;return o}return null}function newtab(e){window_A=window.open(e,"_blank")}function getBlockTargrtIsOn2(e,t,n,r){for(const o of blocks)if(t+64>=o.y+o.h&&r+64<=o.y.block.h){if((e+64<=o.x||e>=o.x+o.w)&&(n+64<=o.x||n>=o.x+o.w))continue;return o}return null}window.addEventListener("load",update);
